{"ast":null,"code":"import _slicedToArray from\"/home/mdalif/Desktop/coding/MERN/mern-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/mdalif/Desktop/coding/MERN/mern-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import Stepper from\"@material-ui/core/Stepper\";import Step from\"@material-ui/core/Step\";import{Redirect}from\"react-router-dom\";import StepLabel from\"@material-ui/core/StepLabel\";import{Link}from\"react-router-dom\";import{Button,SwipeableDrawer}from\"@material-ui/core\";import{passUpdateOtp,updatePassword}from\"../../../actions/auth.action\";import\"./style.css\";import Swal from'sweetalert2';import{useSelector,useDispatch}from\"react-redux\";import Typography from\"@material-ui/core/Typography\";import Header from\"../../../components/Header/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{appBar:{position:\"relative\"},layout:_defineProperty({width:\"auto\",fontSize:\"1.8 rem\",marginLeft:theme.spacing(2),marginRight:theme.spacing(2)},theme.breakpoints.up(400+theme.spacing(2)*2),{width:400,marginLeft:\"auto\",marginRight:\"auto\"}),paper:_defineProperty({marginTop:theme.spacing(3),marginBottom:theme.spacing(3),padding:theme.spacing(2)},theme.breakpoints.up(600+theme.spacing(3)*2),{marginTop:theme.spacing(6),marginBottom:theme.spacing(6),padding:theme.spacing(3)}),stepper:{padding:theme.spacing(3,0,5)},buttons:{display:\"flex\",justifyContent:\"flex-end\"},button:{marginTop:theme.spacing(3),marginLeft:theme.spacing(1)}};});export default function(){var steps=[\"Phone Number\",\"Submit OTP\",\"Change Password\"];var classes=useStyles();var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),activeStep=_React$useState2[0],setActiveStep=_React$useState2[1];var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userOtp=_useState2[0],setUserOtp=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),userPhone=_useState4[0],setUserPhone=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),userPassword=_useState6[0],setUserPassword=_useState6[1];var auth=useSelector(function(state){return state.auth;});var handleNext=function handleNext(){setActiveStep(activeStep+1);};var handleBack=function handleBack(){setActiveStep(activeStep-1);};//Change Pass form\nfunction getStepContent(activeStep){switch(activeStep){case 0:return/*#__PURE__*/_jsx(Phone,{});case 1:return/*#__PURE__*/_jsx(Otp,{});case 2:return/*#__PURE__*/_jsx(ChangePass,{});default:throw new Error(\"Unknown step\");}}function Phone(props){var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),phone=_useState8[0],setPhone=_useState8[1];var otpRequest=function otpRequest(e){e.preventDefault();if(phone=='')return Swal.fire(\"Oops...\",\"Phone number required..\",\"error\");setActiveStep(activeStep+1);setUserPhone(phone);dispatch(passUpdateOtp(phone));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-container\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phone Number\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Enter Your Phone Number\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{value:phone,onChange:function onChange(e){return setPhone(e.target.value);},className:\"input\",type:\"number\",placeholder:\"Enter your phone\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:otpRequest,children:\"SENT OTP\"})})]})]})})});}var Otp=function Otp(props){var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),otp=_useState10[0],setOtp=_useState10[1];var onSubmitOtp=function onSubmitOtp(e){e.preventDefault();if(otp=='')return;console.log(otp);setUserOtp(otp);setActiveStep(activeStep+1);console.log(userOtp);};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"icon-container\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Submit OTP\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"label\",children:[\"We have sent an OTP to \",userPhone]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{value:otp,onChange:function onChange(e){return setOtp(e.target.value);},className:\"input\",type:\"number\",placeholder:\"Enter your OTP\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:onSubmitOtp,children:\"Submit OTP\"})})]})]});};var ChangePass=function ChangePass(props){var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),confirmPassword=_useState14[0],setConfirmPassword=_useState14[1];var onSubmitNewPass=function onSubmitNewPass(e){e.preventDefault();if(password!==confirmPassword){setConfirmPassword('');return Swal.fire(\"Oops...\",\"Confirm password again..\",\"error\");}if(password.length<6)return Swal.fire(\"Oops...\",\"Password mustbe 6 character long..\",\"error\");console.log(password);setUserPassword(password);var userInfo={userPhone:userPhone,password:password,userOtp:userOtp};console.log(userInfo);dispatch(updatePassword(userInfo));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:function onChange(e){return setPassword(e.target.value);},className:\"input\",type:\"password\",placeholder:\"New password\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return setConfirmPassword(e.target.value);},value:confirmPassword,className:\"input\",type:\"password\",placeholder:\"Confirm New password\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",onClick:onSubmitNewPass,children:\"Change Password\"})})]});};// if (auth.authenticate) return <Redirect to='/' />;\nreturn/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Header,{fixed:true}),/*#__PURE__*/_jsx(\"div\",{className:\"stepper-container\",children:/*#__PURE__*/_jsx(\"main\",{className:classes.layout,children:/*#__PURE__*/_jsxs(Paper,{className:classes.paper,children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",align:\"center\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Change Password\"})}),/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,className:classes.stepper,children:steps.map(function(label){return/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:label})},label);})}),/*#__PURE__*/_jsx(React.Fragment,{children:activeStep===steps.length?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Thank you for your order.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\"Your order is Placed. We have emailed your order confirmation to \",/*#__PURE__*/_jsx(\"strong\",{children:auth.user.email}),\", and will send you an update when your order has shipped.\"]}),/*#__PURE__*/_jsx(Link,{to:\"/account/orders\",children:/*#__PURE__*/_jsx(Button,{color:\"orange\",children:\"Go to order page\"})})]}):/*#__PURE__*/_jsxs(React.Fragment,{children:[getStepContent(activeStep),/*#__PURE__*/_jsx(\"div\",{className:classes.buttons,children:activeStep!==0&&/*#__PURE__*/_jsx(Button,{onClick:handleBack,className:classes.button,children:\"Back\"})})]})})]})})})]});}","map":{"version":3,"sources":["/home/mdalif/Desktop/coding/MERN/mern-frontend/src/containers/auth/RESET_PASS/index.js"],"names":["React","useState","useEffect","makeStyles","Paper","Stepper","Step","Redirect","StepLabel","Link","Button","SwipeableDrawer","passUpdateOtp","updatePassword","Swal","useSelector","useDispatch","Typography","Header","useStyles","theme","appBar","position","layout","width","fontSize","marginLeft","spacing","marginRight","breakpoints","up","paper","marginTop","marginBottom","padding","stepper","buttons","display","justifyContent","button","steps","classes","activeStep","setActiveStep","dispatch","userOtp","setUserOtp","userPhone","setUserPhone","userPassword","setUserPassword","auth","state","handleNext","handleBack","getStepContent","Error","Phone","props","phone","setPhone","otpRequest","e","preventDefault","fire","target","value","Otp","otp","setOtp","onSubmitOtp","console","log","ChangePass","password","setPassword","confirmPassword","setConfirmPassword","onSubmitNewPass","length","userInfo","map","label","user","email"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport { Redirect } from \"react-router-dom\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport { Link } from \"react-router-dom\";\nimport { Button, SwipeableDrawer } from \"@material-ui/core\";\nimport { passUpdateOtp, updatePassword } from \"../../../actions/auth.action\";\nimport \"./style.css\";\nimport Swal from 'sweetalert2'\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Header from \"../../../components/Header/index\";\n\nconst useStyles = makeStyles((theme) => ({\n\tappBar: {\n\t\tposition: \"relative\",\n\t},\n\tlayout: {\n\t\twidth: \"auto\",\n\t\tfontSize: \"1.8 rem\",\n\t\tmarginLeft: theme.spacing(2),\n\t\tmarginRight: theme.spacing(2),\n\t\t[theme.breakpoints.up(400 + theme.spacing(2) * 2)]: {\n\t\t\twidth: 400,\n\t\t\tmarginLeft: \"auto\",\n\t\t\tmarginRight: \"auto\",\n\t\t},\n\t},\n\tpaper: {\n\t\tmarginTop: theme.spacing(3),\n\t\tmarginBottom: theme.spacing(3),\n\t\tpadding: theme.spacing(2),\n\t\t[theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\n\t\t\tmarginTop: theme.spacing(6),\n\t\t\tmarginBottom: theme.spacing(6),\n\t\t\tpadding: theme.spacing(3),\n\t\t},\n\t},\n\tstepper: {\n\t\tpadding: theme.spacing(3, 0, 5),\n\t},\n\tbuttons: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"flex-end\",\n\t},\n\tbutton: {\n\t\tmarginTop: theme.spacing(3),\n\t\tmarginLeft: theme.spacing(1),\n\t},\n}));\n\nexport default function () {\n\tconst steps = [\"Phone Number\", \"Submit OTP\", \"Change Password\"];\n\tconst classes = useStyles();\n\tconst [activeStep, setActiveStep] = React.useState(0);\n\tconst dispatch = useDispatch();\n\tconst [userOtp, setUserOtp] = useState(\"\");\n\tconst [userPhone, setUserPhone] = useState(\"\");\n\tconst [userPassword, setUserPassword] = useState(\"\");\n\n\tconst auth = useSelector((state) => state.auth);\n\n\tconst handleNext = () => {\n\t\tsetActiveStep(activeStep + 1);\n\t};\n\n\tconst handleBack = () => {\n\t\tsetActiveStep(activeStep - 1);\n\t};\n\n\t//Change Pass form\n\n\tfunction getStepContent(activeStep) {\n\t\tswitch (activeStep) {\n\t\t\tcase 0:\n\t\t\t\treturn <Phone />;\n\t\t\tcase 1:\n\t\t\t\treturn <Otp />;\n\t\t\tcase 2:\n\t\t\t\treturn <ChangePass />;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unknown step\");\n\t\t}\n\t}\n\tfunction Phone(props) {\n\t\tconst [phone, setPhone] = useState(\"\");\n\n\t\tconst otpRequest = (e) => {\n\t\t\te.preventDefault();\n            if(phone=='')return Swal.fire(\"Oops...\", \"Phone number required..\", \"error\");\n\t\t\tsetActiveStep(activeStep + 1);\n\t\t\tsetUserPhone(phone);\n\n\t\t\tdispatch(passUpdateOtp(phone));\n\t\t};\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div>\n\t\t\t\t\t<div className='login-container'>\n\t\t\t\t\t\t<div className='icon-container'></div>\n\t\t\t\t\t\t<form>\n\t\t\t\t\t\t\t<h2>Phone Number</h2>\n\n\t\t\t\t\t\t\t<div className='input-container'>\n\t\t\t\t\t\t\t\t<label className='label'>Enter Your Phone Number</label>\n\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tvalue={phone}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setPhone(e.target.value)}\n\t\t\t\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\t\t\tplaceholder='Enter your phone'\n                                    required\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className='btn-container'>\n\t\t\t\t\t\t\t\t<button className='submit-btn' onClick={otpRequest}>\n\t\t\t\t\t\t\t\t\tSENT OTP\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\n\tconst Otp = (props) => {\n\t\tconst [otp, setOtp] = useState(\"\");\n\n\t\tconst onSubmitOtp = (e) => {\n\t\t\te.preventDefault();\n            if(otp=='') return\n\t\t\tconsole.log(otp);\n\n\t\t\tsetUserOtp(otp);\n\t\t\tsetActiveStep(activeStep + 1);\n\t\t\tconsole.log(userOtp);\n\t\t};\n\n\t\treturn (\n\t\t\t<div className='login-container'>\n\t\t\t\t<div className='icon-container'></div>\n\t\t\t\t<form>\n\t\t\t\t\t<h2>Submit OTP</h2>\n\n\t\t\t\t\t<div className='input-container'>\n\t\t\t\t\t\t<label className='label'>\n\t\t\t\t\t\t\tWe have sent an OTP to {userPhone}\n\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tvalue={otp}\n\t\t\t\t\t\t\tonChange={(e) => setOtp(e.target.value)}\n\t\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\t\ttype='number'\n\t\t\t\t\t\t\tplaceholder='Enter your OTP'\n                            required\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className='btn-container'>\n\t\t\t\t\t\t<button className='submit-btn' onClick={onSubmitOtp}>\n\t\t\t\t\t\t\tSubmit OTP\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst ChangePass = (props) => {\n\t\tconst [password, setPassword] = useState(\"\");\n\t\tconst [confirmPassword, setConfirmPassword] = useState(\"\");\n\t\tconst onSubmitNewPass = (e) => {\n\t\t\te.preventDefault();\n            if(password!==confirmPassword){\n                setConfirmPassword('')\n                return Swal.fire(\"Oops...\", \"Confirm password again..\", \"error\");}\n            if(password.length < 6) return Swal.fire(\"Oops...\", \"Password mustbe 6 character long..\", \"error\");\n\n            console.log(password)\n\n\t\t\tsetUserPassword(password);\n\n\t\t\tconst userInfo = { userPhone, password, userOtp };\n\t\t\tconsole.log(userInfo);\n\t\t\tdispatch(updatePassword(userInfo));\n\t\t};\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className='input-container'>\n\t\t\t\t\t<label className='label'>New Password</label>\n\t\t\t\t\t<br />\n\t\t\t\t\t<input\n\t\t\t\t\t\tvalue={password}\n\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tplaceholder='New password'\n                        required\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className='input-container'>\n\t\t\t\t\t<label className='label'>Confirm New Password</label>\n\t\t\t\t\t<br />\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={(e) => setConfirmPassword(e.target.value)}\n\t\t\t\t\t\tvalue={confirmPassword}\n\t\t\t\t\t\tclassName='input'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tplaceholder='Confirm New password'\n                        required\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div className='btn-container'>\n\t\t\t\t\t<button className='submit-btn' onClick={onSubmitNewPass}>\n\t\t\t\t\t\tChange Password\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t};\n\n\t// if (auth.authenticate) return <Redirect to='/' />;\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Header fixed />\n\t\t\t<div className='stepper-container'>\n\t\t\t\t{/* <Header fixed /> */}\n\t\t\t\t<main className={classes.layout}>\n\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t<Typography component='h1' variant='h4' align='center'>\n\t\t\t\t\t\t\t<h3>Change Password</h3>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Stepper activeStep={activeStep} className={classes.stepper}>\n\t\t\t\t\t\t\t{steps.map((label) => (\n\t\t\t\t\t\t\t\t<Step key={label}>\n\t\t\t\t\t\t\t\t\t<StepLabel>{label}</StepLabel>\n\t\t\t\t\t\t\t\t</Step>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Stepper>\n\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t{activeStep === steps.length ? (\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<Typography variant='h5' gutterBottom>\n\t\t\t\t\t\t\t\t\t\tThank you for your order.\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Typography variant='subtitle1'>\n\t\t\t\t\t\t\t\t\t\tYour order is Placed. We have emailed your order\n\t\t\t\t\t\t\t\t\t\tconfirmation to <strong>{auth.user.email}</strong>, and will\n\t\t\t\t\t\t\t\t\t\tsend you an update when your order has shipped.\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Link to='/account/orders'>\n\t\t\t\t\t\t\t\t\t\t<Button color='orange'>Go to order page</Button>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t{getStepContent(activeStep)}\n\t\t\t\t\t\t\t\t\t<div className={classes.buttons}>\n\t\t\t\t\t\t\t\t\t\t{activeStep !== 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<Button onClick={handleBack} className={classes.button}>\n\t\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{/* {activeStep == 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleNext}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.button}>\n\t\t\t\t\t\t\t\t\t\t\t\t{activeStep === steps.length - 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Place order\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Next\"}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t) : null} */}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t</Paper>\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}