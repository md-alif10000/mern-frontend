{"ast":null,"code":"import _slicedToArray from\"/home/mdalif/Desktop/coding/MERN/mern-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/mdalif/Desktop/coding/MERN/mern-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import CssBaseline from\"@material-ui/core/CssBaseline\";import AppBar from\"@material-ui/core/AppBar\";import Toolbar from\"@material-ui/core/Toolbar\";import Paper from\"@material-ui/core/Paper\";import Stepper from\"@material-ui/core/Stepper\";import Step from\"@material-ui/core/Step\";import StepLabel from\"@material-ui/core/StepLabel\";import{Link}from'react-router-dom';import Review from\"./Review\";import{useSelector,useDispatch}from\"react-redux\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import TextField from\"@material-ui/core/TextField\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import Checkbox from\"@material-ui/core/Checkbox\";import Radio from\"@material-ui/core/Radio\";import RadioGroup from\"@material-ui/core/RadioGroup\";import FormControl from\"@material-ui/core/FormControl\";import{addAddress,getAddress,addOrder}from\"../../../actions/user.action\";import{getCartItems}from\"../../../actions/cart.action\";import\"./style.css\";import Swal from\"sweetalert2\";import{Button,SwipeableDrawer}from\"@material-ui/core\";import\"./style.css\";import{Redirect}from\"react-router\";import Header from\"../../../components/Header/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Copyright(){return/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\",children:[\"Copyright Â© \",/*#__PURE__*/_jsx(Link,{color:\"inherit\",href:\"https://material-ui.com/\",children:\"Your Website\"}),\" \",new Date().getFullYear(),\".\"]});}var useStyles=makeStyles(function(theme){return{appBar:{position:\"relative\"},layout:_defineProperty({width:\"auto\",fontSize:\"1.8 rem\",marginLeft:theme.spacing(2),marginRight:theme.spacing(2)},theme.breakpoints.up(600+theme.spacing(2)*2),{width:600,marginLeft:\"auto\",marginRight:\"auto\"}),paper:_defineProperty({marginTop:theme.spacing(3),marginBottom:theme.spacing(3),padding:theme.spacing(2)},theme.breakpoints.up(600+theme.spacing(3)*2),{marginTop:theme.spacing(6),marginBottom:theme.spacing(6),padding:theme.spacing(3)}),stepper:{padding:theme.spacing(3,0,5)},buttons:{display:\"flex\",justifyContent:\"flex-end\"},button:{marginTop:theme.spacing(3),marginLeft:theme.spacing(1)}};});export default function Checkout(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),paymentType=_useState2[0],setPaymentType=_useState2[1];console.log(paymentType);var user=useSelector(function(state){return state.user;});var selectedAddress=user.address.slice(user.address.length-1)[0];var steps=[\"Shipping address\",\"Review your order\",\" Payment details\"];var classes=useStyles();var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),activeStep=_React$useState2[0],setActiveStep=_React$useState2[1];var dispatch=useDispatch();var auth=useSelector(function(state){return state.auth;});var cart=useSelector(function(state){return state.cart;});var coupon=JSON.parse(localStorage.getItem('coupon'));var handleNext=function handleNext(){setActiveStep(activeStep+1);};var handleBack=function handleBack(){setActiveStep(activeStep-1);};var couponAmount=coupon?coupon.type=='percentage'?coupon.amount*(1/100):coupon.amount:null;console.log(\"Coupon Amount\",couponAmount);//Address from Hooks............\n//Order confirm hooksssss............\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),confirmOrder=_useState4[0],setConfirmOrder=_useState4[1];var onConfirmOrder=function onConfirmOrder(){var totalAmount=Object.keys(cart.cartItems).reduce(function(totalPrice,key){var _cart$cartItems$key=cart.cartItems[key],price=_cart$cartItems$key.price,qty=_cart$cartItems$key.qty;return totalPrice+price*qty;},0);var totalAmount=(coupon.type=='percentage'?totalAmount*(1-couponAmount):totalAmount-couponAmount)+50;console.log(\"latest total\",totalAmount);var items=Object.keys(cart.cartItems).map(function(key){return{productId:key,payablePrice:cart.cartItems[key].price,purchasedQty:cart.cartItems[key].qty};});var payload={addressId:selectedAddress._id,totalAmount:totalAmount,items:items,paymentStatus:\"pending\",paymentType:paymentType,coupon:coupon._id};console.log(payload);dispatch(addOrder(payload));setActiveStep(activeStep+1);localStorage.removeItem('coupon');setConfirmOrder(true);};// useEffect(() => {\n// \tdispatch(getAddress());\n// }, [user.address]);\nuseEffect(function(){auth.authenticate&&dispatch(getAddress());auth.authenticate&&dispatch(getCartItems());},[auth.authenticate]);function getStepContent(activeStep){switch(activeStep){case 0:return/*#__PURE__*/_jsx(AddressForm,{});case 1:return/*#__PURE__*/_jsx(Review,{});case 2:return/*#__PURE__*/_jsx(PaymentForm,{});default:throw new Error(\"Unknown step\");}}//Address form............\nfunction AddressForm(props){var previousAddress=user.address;var oldAddress=user.address.slice(user.address.length-1)[0];console.log(oldAddress);// useEffect(() => {\n// \tdispatch(getAddress());\n// }, [user.address]);\nvar _useState5=useState(oldAddress?oldAddress.name:\"\"),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(oldAddress?oldAddress.mobileNumber:\"\"),_useState8=_slicedToArray(_useState7,2),mobileNumber=_useState8[0],setMobileNumber=_useState8[1];var _useState9=useState(oldAddress?oldAddress.zipCode:\"\"),_useState10=_slicedToArray(_useState9,2),zipCode=_useState10[0],setZipCode=_useState10[1];var _useState11=useState(oldAddress?oldAddress.address:\"\"),_useState12=_slicedToArray(_useState11,2),address=_useState12[0],setAddress=_useState12[1];var _useState13=useState(oldAddress?oldAddress.cityDistrict:\"\"),_useState14=_slicedToArray(_useState13,2),cityDistrict=_useState14[0],setCityDistrict=_useState14[1];var _useState15=useState(oldAddress?oldAddress.alternatePhone:\"\"),_useState16=_slicedToArray(_useState15,2),alternatePhone=_useState16[0],setAlternatePhone=_useState16[1];console.log(oldAddress);var _useState17=useState(oldAddress?oldAddress._id:\"\"),_useState18=_slicedToArray(_useState17,2),id=_useState18[0],setId=_useState18[1];console.log(name);var onAddressSubmit=function onAddressSubmit(e){var payload={address:{name:name,mobileNumber:mobileNumber,zipCode:zipCode,address:address,cityDistrict:cityDistrict,alternatePhone:alternatePhone}};console.log(payload);if(id){payload.address._id=id;}if(name==\"\"){return Swal.fire({icon:\"error\",title:\"Oops...\",text:\"Name is required...!\"});}if(address==\"\"){return Swal.fire({icon:\"error\",title:\"Oops...\",text:\"Address is required....!\"});}if(mobileNumber==\"\"){return Swal.fire({icon:\"error\",title:\"Oops...\",text:\"Mobile number is required..!\"});}if(zipCode==\"\"){return Swal.fire({icon:\"error\",title:\"Oops...\",text:\"Zipcode is required..!\"});}if(cityDistrict==\"\"){return Swal.fire({icon:\"error\",title:\"Oops...\",text:\"City/district is required..!\"});}dispatch(addAddress(payload));setActiveStep(activeStep+1);};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",style:{fontSize:\"1.8rem\"},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:/*#__PURE__*/_jsx(\"h4\",{children:\"Shipping address\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"content\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"#\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"user-details\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"details\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your name\",required:true,value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"details\",children:\"Full Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your address\",required:true,value:address,onChange:function onChange(e){return setAddress(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"details\",children:\"City/District\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your email\",required:true,value:cityDistrict,onChange:function onChange(e){return setCityDistrict(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"details\",children:\"Zip Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your number\",required:true,value:zipCode,onChange:function onChange(e){return setZipCode(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"details\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{value:mobileNumber,type:\"text\",placeholder:\"Enter your Phone Number\",required:true,onChange:function onChange(e){return setMobileNumber(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"input-box\",children:[/*#__PURE__*/_jsx(\"span\",{class:\"details\",children:\"Secondary Phone (optional)\"}),/*#__PURE__*/_jsx(\"input\",{value:alternatePhone,type:\"text\",placeholder:\"Enter Secondary Phone\",required:true,onChange:function onChange(e){return setAlternatePhone(e.target.value);}})]})]}),/*#__PURE__*/_jsx(\"div\",{class:\"button\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit Address\",onClick:onAddressSubmit})})]})})]})});}function PaymentForm(){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Payment method\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(FormControl,{component:\"fieldset\",children:/*#__PURE__*/_jsxs(RadioGroup,{\"aria-label\":\"Payment Type\",name:\"gender1\",value:paymentType,onChange:function onChange(e){return setPaymentType(e.target.value);},children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"bkash\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Bkash\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"ssl\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"SSL Commerce\"}),/*#__PURE__*/_jsx(FormControlLabel,{value:\"cod\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"Cash On Delivery\"})]})}),/*#__PURE__*/_jsx(Button,{fullWidth:true,style:{color:\"black\",backgroundColor:\"#f0c800\"},onClick:paymentType==\"\"?null:onConfirmOrder,children:/*#__PURE__*/_jsx(\"h5\",{children:\"Confirm Order\"})})]})]});}if(!cart.cartItems){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}if(!auth.authenticate)return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",children:[/*#__PURE__*/_jsx(Header,{fixed:true}),/*#__PURE__*/_jsxs(\"main\",{className:classes.layout,children:[/*#__PURE__*/_jsxs(Paper,{className:classes.paper,children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h4\",align:\"center\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Checkout\"})}),/*#__PURE__*/_jsx(Stepper,{activeStep:activeStep,className:classes.stepper,children:steps.map(function(label){return/*#__PURE__*/_jsx(Step,{children:/*#__PURE__*/_jsx(StepLabel,{children:label})},label);})}),/*#__PURE__*/_jsx(React.Fragment,{children:activeStep===steps.length?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Thank you for your order.\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",children:[\"Your order is Placed. We have emailed your order confirmation to \",/*#__PURE__*/_jsx(\"strong\",{children:auth.user.email}),\", and will send you an update when your order has shipped.\"]}),/*#__PURE__*/_jsx(Link,{to:\"/account/orders\",children:/*#__PURE__*/_jsx(Button,{color:\"orange\",children:\"Go to order page\"})})]}):/*#__PURE__*/_jsxs(React.Fragment,{children:[getStepContent(activeStep),/*#__PURE__*/_jsxs(\"div\",{className:classes.buttons,children:[activeStep!==0&&/*#__PURE__*/_jsx(Button,{onClick:handleBack,className:classes.button,children:\"Back\"}),activeStep==1?/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleNext,className:classes.button,children:activeStep===steps.length-1?\"Place order\":\"Next\"}):null]})]})})]}),/*#__PURE__*/_jsx(Copyright,{})]})]})});}","map":{"version":3,"sources":["/home/mdalif/Desktop/coding/MERN/mern-frontend/src/containers/CheckoutPage/option2/Checkout.js"],"names":["React","useState","useEffect","makeStyles","CssBaseline","AppBar","Toolbar","Paper","Stepper","Step","StepLabel","Link","Review","useSelector","useDispatch","Grid","Typography","TextField","FormControlLabel","Checkbox","Radio","RadioGroup","FormControl","addAddress","getAddress","addOrder","getCartItems","Swal","Button","SwipeableDrawer","Redirect","Header","Copyright","Date","getFullYear","useStyles","theme","appBar","position","layout","width","fontSize","marginLeft","spacing","marginRight","breakpoints","up","paper","marginTop","marginBottom","padding","stepper","buttons","display","justifyContent","button","Checkout","props","paymentType","setPaymentType","console","log","user","state","selectedAddress","address","slice","length","steps","classes","activeStep","setActiveStep","dispatch","auth","cart","coupon","JSON","parse","localStorage","getItem","handleNext","handleBack","couponAmount","type","amount","confirmOrder","setConfirmOrder","onConfirmOrder","totalAmount","Object","keys","cartItems","reduce","totalPrice","key","price","qty","items","map","productId","payablePrice","purchasedQty","payload","addressId","_id","paymentStatus","removeItem","authenticate","getStepContent","Error","AddressForm","previousAddress","oldAddress","name","setName","mobileNumber","setMobileNumber","zipCode","setZipCode","setAddress","cityDistrict","setCityDistrict","alternatePhone","setAlternatePhone","id","setId","onAddressSubmit","e","fire","icon","title","text","target","value","PaymentForm","color","backgroundColor","label","email"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport {Link} from 'react-router-dom'\nimport Review from \"./Review\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport { addAddress, getAddress, addOrder } from \"../../../actions/user.action\";\nimport { getCartItems } from \"../../../actions/cart.action\";\nimport \"./style.css\";\nimport Swal from \"sweetalert2\";\nimport { Button, SwipeableDrawer } from \"@material-ui/core\";\nimport \"./style.css\";\nimport { Redirect } from \"react-router\";\nimport Header from \"../../../components/Header/index\";\n\nfunction Copyright() {\n\treturn (\n\t\t<Typography variant='body2' color='textSecondary' align='center'>\n\t\t\t{\"Copyright Â© \"}\n\t\t\t<Link color='inherit' href='https://material-ui.com/'>\n\t\t\t\tYour Website\n\t\t\t</Link>{\" \"}\n\t\t\t{new Date().getFullYear()}\n\t\t\t{\".\"}\n\t\t</Typography>\n\t);\n}\n\nconst useStyles = makeStyles((theme) => ({\n\tappBar: {\n\t\tposition: \"relative\",\n\t},\n\tlayout: {\n\t\twidth: \"auto\",\n\t\tfontSize: \"1.8 rem\",\n\t\tmarginLeft: theme.spacing(2),\n\t\tmarginRight: theme.spacing(2),\n\t\t[theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\n\t\t\twidth: 600,\n\t\t\tmarginLeft: \"auto\",\n\t\t\tmarginRight: \"auto\",\n\t\t},\n\t},\n\tpaper: {\n\t\tmarginTop: theme.spacing(3),\n\t\tmarginBottom: theme.spacing(3),\n\t\tpadding: theme.spacing(2),\n\t\t[theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\n\t\t\tmarginTop: theme.spacing(6),\n\t\t\tmarginBottom: theme.spacing(6),\n\t\t\tpadding: theme.spacing(3),\n\t\t},\n\t},\n\tstepper: {\n\t\tpadding: theme.spacing(3, 0, 5),\n\t},\n\tbuttons: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"flex-end\",\n\t},\n\tbutton: {\n\t\tmarginTop: theme.spacing(3),\n\t\tmarginLeft: theme.spacing(1),\n\t},\n}));\n\nexport default function Checkout(props) {\n\tconst [paymentType, setPaymentType] = useState(\"\");\n\tconsole.log(paymentType);\n\tconst user = useSelector((state) => state.user);\n\tconst selectedAddress = user.address.slice(user.address.length - 1)[0];\n\n\tconst steps = [\"Shipping address\", \"Review your order\", \" Payment details\"];\n\tconst classes = useStyles();\n\tconst [activeStep, setActiveStep] = React.useState(0);\n\tconst dispatch = useDispatch();\n\n\tconst auth = useSelector((state) => state.auth);\n\tconst cart = useSelector((state) => state.cart);\n\tconst coupon=JSON.parse(localStorage.getItem('coupon'))\n\n\tconst handleNext = () => {\n\t\tsetActiveStep(activeStep + 1);\n\t};\n\n\tconst handleBack = () => {\n\t\tsetActiveStep(activeStep - 1);\n\t};\n\n\tconst couponAmount= coupon ? coupon.type== 'percentage'? coupon.amount*(1/100) : coupon.amount :null\n\tconsole.log(\"Coupon Amount\",couponAmount)\n\n\t//Address from Hooks............\n\n\t//Order confirm hooksssss............\n\tconst [confirmOrder, setConfirmOrder] = useState(\"\");\n\tconst onConfirmOrder = () => {\n\t\tvar totalAmount = Object.keys(cart.cartItems).reduce(\n\t\t\t(totalPrice, key) => {\n\t\t\t\tconst { price, qty } = cart.cartItems[key];\n\t\t\t\treturn totalPrice + price * qty;\n\t\t\t},\n\t\t\t0\n\t\t);\n\n\tvar totalAmount=(coupon.type == 'percentage'? totalAmount*(1-couponAmount):totalAmount-couponAmount) + 50\n\tconsole.log(\"latest total\",totalAmount)\n\n\n\n\t\tconst items = Object.keys(cart.cartItems).map((key) => ({\n\t\t\tproductId: key,\n\t\t\tpayablePrice: cart.cartItems[key].price,\n\t\t\tpurchasedQty: cart.cartItems[key].qty,\n\t\t}));\n\t\tconst payload = {\n\t\t\taddressId: selectedAddress._id,\n\t\t\ttotalAmount,\n\t\t\titems,\n\t\t\tpaymentStatus: \"pending\",\n\t\t\tpaymentType,\n\t\t\tcoupon:coupon._id\n\t\t};\n\n\t\tconsole.log(payload);\n\t\tdispatch(addOrder(payload));\n\t\tsetActiveStep(activeStep+1)\n\t\tlocalStorage.removeItem('coupon')\n\t\tsetConfirmOrder(true);\n\t};\n\n\t// useEffect(() => {\n\t// \tdispatch(getAddress());\n\t// }, [user.address]);\n\n\tuseEffect(() => {\n\t\tauth.authenticate && dispatch(getAddress());\n\t\tauth.authenticate && dispatch(getCartItems());\n\t}, [auth.authenticate]);\n\n\tfunction getStepContent(activeStep) {\n\t\tswitch (activeStep) {\n\t\t\tcase 0:\n\t\t\t\treturn <AddressForm />;\n\t\t\tcase 1:\n\t\t\t\treturn <Review />;\n\t\t\tcase 2:\n\t\t\t\treturn <PaymentForm />;\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unknown step\");\n\t\t}\n\t}\n\n\t//Address form............\n\n\tfunction AddressForm(props) {\n\t\tconst previousAddress = user.address;\n\t\tconst oldAddress = user.address.slice(user.address.length - 1)[0];\n\t\tconsole.log(oldAddress);\n\t\t// useEffect(() => {\n\t\t// \tdispatch(getAddress());\n\t\t// }, [user.address]);\n\t\tconst [name, setName] = useState(oldAddress ? oldAddress.name : \"\");\n\n\t\tconst [mobileNumber, setMobileNumber] = useState(\n\t\t\toldAddress ? oldAddress.mobileNumber : \"\"\n\t\t);\n\t\tconst [zipCode, setZipCode] = useState(\n\t\t\toldAddress ? oldAddress.zipCode : \"\"\n\t\t);\n\n\t\tconst [address, setAddress] = useState(\n\t\t\toldAddress ? oldAddress.address : \"\"\n\t\t);\n\t\tconst [cityDistrict, setCityDistrict] = useState(\n\t\t\toldAddress ? oldAddress.cityDistrict : \"\"\n\t\t);\n\n\t\tconst [alternatePhone, setAlternatePhone] = useState(\n\t\t\toldAddress ? oldAddress.alternatePhone : \"\"\n\t\t);\n\n\t\tconsole.log(oldAddress);\n\t\tconst [id, setId] = useState(oldAddress ? oldAddress._id : \"\");\n\t\tconsole.log(name);\n\n\t\tconst onAddressSubmit = (e) => {\n\t\t\tconst payload = {\n\t\t\t\taddress: {\n\t\t\t\t\tname,\n\t\t\t\t\tmobileNumber,\n\t\t\t\t\tzipCode,\n\t\t\t\t\taddress,\n\t\t\t\t\tcityDistrict,\n\t\t\t\t\talternatePhone,\n\t\t\t\t},\n\t\t\t};\n\t\t\tconsole.log(payload);\n\t\t\tif (id) {\n\t\t\t\tpayload.address._id = id;\n\t\t\t}\n\t\t\tif (name == \"\") {\n\t\t\t\treturn Swal.fire({\n\t\t\t\t\ticon: \"error\",\n\t\t\t\t\ttitle: \"Oops...\",\n\t\t\t\t\ttext: \"Name is required...!\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (address == \"\") {\n\t\t\t\treturn Swal.fire({\n\t\t\t\t\ticon: \"error\",\n\t\t\t\t\ttitle: \"Oops...\",\n\t\t\t\t\ttext: \"Address is required....!\",\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (mobileNumber == \"\") {\n\t\t\t\treturn Swal.fire({\n\t\t\t\t\ticon: \"error\",\n\t\t\t\t\ttitle: \"Oops...\",\n\t\t\t\t\ttext: \"Mobile number is required..!\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (zipCode == \"\") {\n\t\t\t\treturn Swal.fire({\n\t\t\t\t\ticon: \"error\",\n\t\t\t\t\ttitle: \"Oops...\",\n\t\t\t\t\ttext: \"Zipcode is required..!\",\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (cityDistrict == \"\") {\n\t\t\t\treturn Swal.fire({\n\t\t\t\t\ticon: \"error\",\n\t\t\t\t\ttitle: \"Oops...\",\n\t\t\t\t\ttext: \"City/district is required..!\",\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdispatch(addAddress(payload));\n\t\t\tsetActiveStep(activeStep + 1);\n\t\t};\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className='mainContainer' style={{ fontSize: \"1.8rem\" }}>\n\t\t\t\t\t<Typography variant='h6' gutterBottom>\n\t\t\t\t\t\t<h4>Shipping address</h4>\n\t\t\t\t\t</Typography>\n\n\t\t\t\t\t<div class='content'>\n\t\t\t\t\t\t<form action='#'>\n\t\t\t\t\t\t\t<div class='user-details'>\n\t\t\t\t\t\t\t\t<div class='input-box'>\n\t\t\t\t\t\t\t\t\t<span class='details'>Full Name</span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your name'\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setName(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='input-box'>\n\t\t\t\t\t\t\t\t\t<span class='details'>Full Address</span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your address'\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tvalue={address}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setAddress(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='input-box'>\n\t\t\t\t\t\t\t\t\t<span class='details'>City/District</span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your email'\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tvalue={cityDistrict}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setCityDistrict(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='input-box'>\n\t\t\t\t\t\t\t\t\t<span class='details'>Zip Code</span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your number'\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tvalue={zipCode}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setZipCode(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='input-box'>\n\t\t\t\t\t\t\t\t\t<span class='details'>Phone Number</span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tvalue={mobileNumber}\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter your Phone Number'\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setMobileNumber(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class='input-box'>\n\t\t\t\t\t\t\t\t\t<span class='details'>Secondary Phone (optional)</span>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tvalue={alternatePhone}\n\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\tplaceholder='Enter Secondary Phone'\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setAlternatePhone(e.target.value)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/* <div class='gender-details'>\n\t\t\t\t\t\t\t\t<input type='radio' name='gender' id='dot-1' />\n\t\t\t\t\t\t\t\t<input type='radio' name='gender' id='dot-2' />\n\t\t\t\t\t\t\t\t<input type='radio' name='gender' id='dot-3' />\n\t\t\t\t\t\t\t\t<span class='gender-title'>Gender</span>\n\t\t\t\t\t\t\t\t<div class='category'>\n\t\t\t\t\t\t\t\t\t<label for='dot-1'>\n\t\t\t\t\t\t\t\t\t\t<span class='dot one'></span>\n\t\t\t\t\t\t\t\t\t\t<span class='gender'>Male</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<label for='dot-2'>\n\t\t\t\t\t\t\t\t\t\t<span class='dot two'></span>\n\t\t\t\t\t\t\t\t\t\t<span class='gender'>Female</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<label for='dot-3'>\n\t\t\t\t\t\t\t\t\t\t<span class='dot three'></span>\n\t\t\t\t\t\t\t\t\t\t<span class='gender'>Prefer not to say</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div> */}\n\t\t\t\t\t\t\t<div class='button'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t\t\t\tvalue='Submit Address'\n\t\t\t\t\t\t\t\t\tonClick={onAddressSubmit}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* <Button\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tstyle={{ backgroundColor: \"yellow\", color: \"gray\" }}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<h5>Submit Address</h5>\n\t\t\t\t\t</Button> */}\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\tfunction PaymentForm() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Typography variant='h6' gutterBottom>\n\t\t\t\t\tPayment method\n\t\t\t\t</Typography>\n\t\t\t\t<Grid container spacing={3}>\n\t\t\t\t\t<FormControl component='fieldset'>\n\t\t\t\t\t\t{/* <FormLabel component='legend'>Payment Type</FormLabel> */}\n\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\taria-label='Payment Type'\n\t\t\t\t\t\t\tname='gender1'\n\t\t\t\t\t\t\tvalue={paymentType}\n\t\t\t\t\t\t\tonChange={(e) => setPaymentType(e.target.value)}>\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tvalue='bkash'\n\t\t\t\t\t\t\t\tcontrol={<Radio />}\n\t\t\t\t\t\t\t\tlabel='Bkash'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tvalue='ssl'\n\t\t\t\t\t\t\t\tcontrol={<Radio />}\n\t\t\t\t\t\t\t\tlabel='SSL Commerce'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\tvalue='cod'\n\t\t\t\t\t\t\t\tcontrol={<Radio />}\n\t\t\t\t\t\t\t\tlabel='Cash On Delivery'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t</FormControl>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\tstyle={{ color: \"black\", backgroundColor: \"#f0c800\" }}\n\t\t\t\t\t\tonClick={paymentType == \"\" ? null : onConfirmOrder}>\n\t\t\t\t\t\t<h5>Confirm Order</h5>\n\t\t\t\t\t</Button>\n\t\t\t\t</Grid>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\tif (!cart.cartItems) {\n\t\treturn <Redirect to='/' />;\n\t\n\t}\n\t\tif (!auth.authenticate) return <Redirect to='/login'></Redirect>;\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div className='mainContainer'>\n\t\t\t\t{/* <CssBaseline /> */}\n\t\t\t\t<Header fixed/>\n\t\t\t\t<main className={classes.layout}>\n\t\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t\t<Typography component='h1' variant='h4' align='center'>\n\t\t\t\t\t\t\t<h3>Checkout</h3>\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Stepper activeStep={activeStep} className={classes.stepper}>\n\t\t\t\t\t\t\t{steps.map((label) => (\n\t\t\t\t\t\t\t\t<Step key={label}>\n\t\t\t\t\t\t\t\t\t<StepLabel>{label}</StepLabel>\n\t\t\t\t\t\t\t\t</Step>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Stepper>\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t{activeStep === steps.length ? (\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t<Typography variant='h5' gutterBottom>\n\t\t\t\t\t\t\t\t\t\tThank you for your order.\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Typography variant='subtitle1'>\n\t\t\t\t\t\t\t\t\t\tYour order is Placed. We have emailed your order\n\t\t\t\t\t\t\t\t\t\tconfirmation to <strong>{auth.user.email}</strong>, and will\n\t\t\t\t\t\t\t\t\t\tsend you an update when your order has shipped.\n\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t<Link to='/account/orders'>\n\t\t\t\t\t\t\t\t\t\t<Button color='orange'>Go to order page</Button>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t{getStepContent(activeStep)}\n\t\t\t\t\t\t\t\t\t<div className={classes.buttons}>\n\t\t\t\t\t\t\t\t\t\t{activeStep !== 0 && (\n\t\t\t\t\t\t\t\t\t\t\t<Button onClick={handleBack} className={classes.button}>\n\t\t\t\t\t\t\t\t\t\t\t\tBack\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t{activeStep == 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleNext}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.button}>\n\t\t\t\t\t\t\t\t\t\t\t\t{activeStep === steps.length - 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Place order\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Next\"}\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t</Paper>\n\t\t\t\t\t<Copyright />\n\t\t\t\t</main>\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}