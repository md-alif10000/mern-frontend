{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{getOrders}from\"../../actions\";import Header from\"../../components/Header/index\";import{Redirect}from\"react-router-dom\";import{generatePublicUrl}from\"../../urlconfig\";import\"./style2.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function OrderPage2(props){var dispatch=useDispatch();var user=useSelector(function(state){return state.user;});var auth=useSelector(function(state){return state.auth;});useEffect(function(){dispatch(getOrders());},[]);var getStatus=function getStatus(order){var status=order.orderStatus.reverse().filter(function(status){return status.isCompleted=true;});return status[status.length-1].type;};if(!auth.authenticate)return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{fixed:true}),/*#__PURE__*/_jsx(\"div\",{className:\" tableContainer\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"table table-striped table-dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"No\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Payment Method\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Order Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Total Amount\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:user.orders.map(function(order,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index}),/*#__PURE__*/_jsx(\"td\",{children:order.items.map(function(item,index){return/*#__PURE__*/_jsx(Link,{to:\"/order_details/\".concat(order._id),style:{textDecoration:\"none\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"(\",index+1,\")-\"]}),/*#__PURE__*/_jsx(\"img\",{className:\"orderImg\",src:generatePublicUrl(item.productId.productPictures[0].img)}),item.productId.name,\" \",/*#__PURE__*/_jsx(\"br\",{})]})});})}),/*#__PURE__*/_jsx(\"td\",{children:order.paymentType}),/*#__PURE__*/_jsx(\"td\",{children:getStatus(order)}),console.log(order),/*#__PURE__*/_jsxs(\"td\",{children:[order.items.map(function(item,index){return/*#__PURE__*/_jsxs(\"p\",{children:[\"*\",item.payablePrice]});}),\"Total Price=\",Object.keys(order.items).reduce(function(totalPrice,key){var payablePrice=order.items[key].payablePrice;return totalPrice+payablePrice;},0)]})]});})})]})})]});}","map":{"version":3,"sources":["/home/mdalif/Desktop/coding/MERN/mern-frontend/src/containers/OrderPage/index2.js"],"names":["React","useEffect","useDispatch","useSelector","Link","getOrders","Header","Redirect","generatePublicUrl","OrderPage2","props","dispatch","user","state","auth","getStatus","order","status","orderStatus","reverse","filter","isCompleted","length","type","authenticate","orders","map","index","items","item","_id","textDecoration","display","productId","productPictures","img","name","paymentType","console","log","payablePrice","Object","keys","reduce","totalPrice","key"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { getOrders } from \"../../actions\";\nimport Header from \"../../components/Header/index\";\n\timport { Redirect } from \"react-router-dom\";\n\nimport { generatePublicUrl } from \"../../urlconfig\";\nimport \"./style2.css\";\n\nexport default function OrderPage2(props) {\n\tconst dispatch = useDispatch();\n\tconst user = useSelector((state) => state.user);\n\tconst auth = useSelector(state => state.auth)\n\n\tuseEffect(() => {\n\t\tdispatch(getOrders());\n\t}, []);\n\n    const getStatus=(order)=>{\n        const status=order.orderStatus.reverse().filter(status=>{\n             return (status.isCompleted = true);\n\n        }\n       \n        )\n\n        return status[status.length -1].type\n    }\n\tif (!auth.authenticate) return <Redirect to='/' />;\n\treturn (\n\t\t<>\n\t\t<Header fixed/>\n\t\t<div className=' tableContainer'>\n\t\t\t<table class='table table-striped table-dark'>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th scope='col'>No</th>\n\t\t\t\t\t\t<th scope='col'>Product Name</th>\n\t\t\t\t\t\t<th scope='col'>Payment Method</th>\n\t\t\t\t\t\t<th scope='col'>Order Status</th>\n\n\t\t\t\t\t\t<th scope='col'>Total Amount</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{user.orders.map((order, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{index}</td>\n\n\t\t\t\t\t\t\t\t{/* <th scope='row'>1</th> */}\n\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{order.items.map((item, index) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\tto={`/order_details/${order._id}`}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: \"none\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\" }}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span>({index + 1})-</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName='orderImg'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={generatePublicUrl(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.productId.productPictures[0].img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.productId.name} <br />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>{order.paymentType}</td>\n\t\t\t\t\t\t\t\t<td>\n                                  {getStatus(order)}\n                                \n                                    \n                                  </td>\n\n\t\t\t\t\t\t\t\t{console.log(order)}\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{order.items.map((item, index) => {\n\t\t\t\t\t\t\t\t\t\treturn <p>*{item.payablePrice}</p>;\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tTotal Price=\n\t\t\t\t\t\t\t\t\t{Object.keys(order.items).reduce((totalPrice, key) => {\n\t\t\t\t\t\t\t\t\t\tconst { payablePrice } = order.items[key];\n\t\t\t\t\t\t\t\t\t\treturn totalPrice + payablePrice;\n\t\t\t\t\t\t\t\t\t}, 0)}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t{/* <tr>\n\t\t\t\t\t\t\t<th scope='row'>1</th>\n\t\t\t\t\t\t\t<td>Mark</td>\n\t\t\t\t\t\t\t<td>Otto</td>\n\t\t\t\t\t\t\t<td>@mdo</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{user.orders.map((order) => {\n\t\t\t\t\t\t\treturn order.items.map((item) => (\n\t\t\t\t\t\t\t\t<Card style={{ display: \"block\", margin: \"5px 0\" }}>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={`/order_details/${order._id}`}\n\t\t\t\t\t\t\t\t\t\tclassName='orderItemContainer'>\n\t\t\t\t\t\t\t\t\t\t<div className='orderImgContainer'>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='orderImg'\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={generatePublicUrl(\n\t\t\t\t\t\t\t\t\t\t\t\t\titem.productId.productPictures[0].img\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className='orderRow'>\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ textDecoration: \"none\" }}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName='orderName'>\n\t\t\t\t\t\t\t\t\t\t\t\t{item.productId.name}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className='orderPrice'>\n\t\t\t\t\t\t\t\t\t\t\t\t<BiRupee style={{ textDecoration: \"none\" }} />\n\t\t\t\t\t\t\t\t\t\t\t\t{item.payablePrice}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div>{order.paymentStatus}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t));\n\t\t\t\t\t\t})} */}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t\t</>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}