{"ast":null,"code":"import axios from \"axios\";\nimport store from \"../store\";\nimport { cartConstants } from \"./constants\";\nexport const addToCart = (product, newQty = 1) => {\n  return async dispatch => {\n    co;\n    const {\n      cartItems\n    } = store.getState().cart; // console.log(\"action::products\", products);\n\n    const qty = cartItems[product._id] ? parseInt(cartItems[product._id].qty + 1) : 1;\n    cartItems[product._id] = { ...product,\n      qty\n    };\n    localStorage.setItem(\"cart\", JSON.stringify(cartItems));\n    dispatch({\n      type: cartConstants.ADD_TO_CART,\n      payload: {\n        cartItems\n      }\n    });\n  };\n};\nexport const decreaseCart = product => {\n  return async dispatch => {\n    const {\n      cartItems\n    } = store.getState().cart; // console.log(\"action::products\", products);\n\n    const qty = cartItems[product._id] ? parseInt(cartItems[product._id].qty - 1) : 1;\n    cartItems[product._id] = { ...product,\n      qty\n    };\n    localStorage.setItem(\"cart\", JSON.stringify(cartItems));\n    dispatch({\n      type: cartConstants.DECREASE_CART,\n      payload: {\n        cartItems\n      }\n    });\n  };\n};\nexport const updateCart = () => {\n  return async dispatch => {\n    const cartItems = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : null;\n\n    if (cartItems) {\n      dispatch({\n        type: cartConstants.ADD_TO_CART,\n        payload: {\n          cartItems\n        }\n      });\n    }\n  };\n};\n\nconst getCartItems = () => {\n  return async dispatch => {\n    try {\n      dispatch({\n        type: cartConstants.ADD_TO_CART_REQUEST\n      });\n      const res = await axios.post('/uset/getCartItems');\n\n      if (res.status = 200) {\n        const {\n          cartItems\n        } = res.data;\n        console.log({\n          getCartItems: cartItems\n        });\n\n        if (cartItems) {\n          dispatch({\n            type: cartConstants.ADD_TO_CART_SUCCESS,\n            payload: {\n              cartItems\n            }\n          });\n        }\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n};","map":{"version":3,"sources":["/home/mdalif/Desktop/coding/Flipkart_Clone/flipkart_clone/src/actions/cart.action.js"],"names":["axios","store","cartConstants","addToCart","product","newQty","dispatch","co","cartItems","getState","cart","qty","_id","parseInt","localStorage","setItem","JSON","stringify","type","ADD_TO_CART","payload","decreaseCart","DECREASE_CART","updateCart","getItem","parse","getCartItems","ADD_TO_CART_REQUEST","res","post","status","data","console","log","ADD_TO_CART_SUCCESS","error"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport store from \"../store\";\nimport { cartConstants } from \"./constants\";\n\nexport const addToCart = (product,newQty=1) => {\n\treturn async (dispatch) => {\n\t\tco\n\t\tconst { cartItems } = store.getState().cart;\n\t\t// console.log(\"action::products\", products);\n\n\t\tconst qty = cartItems[product._id]\n\t\t\t? parseInt(cartItems[product._id].qty + 1)\n\t\t\t: 1;\n\t\t\tcartItems[product._id] = {\n\t\t\t...product,\n\t\t\tqty,\n\t\t};\n\t\tlocalStorage.setItem(\"cart\", JSON.stringify(cartItems));\n\t\tdispatch({\n\t\t\ttype: cartConstants.ADD_TO_CART,\n\t\t\tpayload: {\n\t\t\t\tcartItems\n\t\t\t},\n\t\t});\n\t};\n};\n\n\n\n\nexport const decreaseCart = (product) => {\n\treturn async (dispatch) => {\n\t\tconst { cartItems } = store.getState().cart;\n\t\t// console.log(\"action::products\", products);\n\n\t\tconst qty = cartItems[product._id]\n\t\t\t? parseInt(cartItems[product._id].qty - 1)\n\t\t\t: 1;\n\t\t\tcartItems[product._id] = {\n\t\t\t...product,\n\t\t\tqty,\n\t\t};\n\t\tlocalStorage.setItem(\"cart\", JSON.stringify(cartItems));\n\t\tdispatch({\n\t\t\ttype: cartConstants.DECREASE_CART,\n\t\t\tpayload: {\n\t\t\t\tcartItems\n\t\t\t},\n\t\t});\n\t};\n};\n\n\nexport const updateCart=()=>{\n\treturn async dispatch=>{\n\t\tconst cartItems=localStorage.getItem('cart') ?\n\t\tJSON.parse(localStorage.getItem('cart')) :null\n\n\t\tif(cartItems){\n\t\t\tdispatch({\n\t\t\t\ttype:cartConstants.ADD_TO_CART,\n\t\t\t\tpayload:{cartItems}\n\t\t\t})\n\t\t}\n\t}\n}\n\n\nconst getCartItems=()=>{\n\treturn async dispatch=>{\n\t\ttry{\n\t\t\tdispatch({type:cartConstants.ADD_TO_CART_REQUEST})\n\t\t\tconst res=await axios.post('/uset/getCartItems')\n\t\t\tif(res.status=200){\n\t\t\t\tconst {cartItems}=res.data\n\t\t\t\tconsole.log({getCartItems:cartItems})\n\t\t\t\tif(cartItems){\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype:cartConstants.ADD_TO_CART_SUCCESS,\n\t\t\t\t\t\tpayload:{cartItems}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(error){\n\t\t\tconsole.log(error)\n\n\t\t}\n\t}\n}"]},"metadata":{},"sourceType":"module"}