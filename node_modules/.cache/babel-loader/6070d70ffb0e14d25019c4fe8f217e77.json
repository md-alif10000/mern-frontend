{"ast":null,"code":"import _regeneratorRuntime from\"/home/mdalif/Desktop/coding/MERN/mern-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/home/mdalif/Desktop/coding/MERN/mern-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/home/mdalif/Desktop/coding/MERN/mern-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Redirect}from\"react-router-dom\";import axios from\"../helpers/axios\";import{authConstants,cartConstants}from\"./constants\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";export var login=function login(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res,_res$data,token,_user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:authConstants.LOGIN_REQUEST});_context.next=3;return axios.post(\"/login\",_objectSpread({},user));case 3:res=_context.sent;if(res.status===200){_res$data=res.data,token=_res$data.token,_user=_res$data.user;localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(_user));dispatch({type:authConstants.LOGIN_SUCCESS,payload:{token:token,user:_user}});Swal.fire(\"Wow..\",\"Login Successful..!\",\"success\");}else{if(res.status===400){dispatch({type:authConstants.LOGIN_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Something went wrong!\",\"error\");}}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var registerOtp=function registerOtp(phone){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(phone);dispatch({type:authConstants.REGISTER_OTP_FAILURE});_context2.next=4;return axios.post(\"/register_verify\",{phone:phone});case 4:res=_context2.sent;if(res.status===200){dispatch({type:authConstants.REGISTER_OTP_SUCCESS});Swal.fire(\"Wow.\",\"Otp sent successful.!\",\"success\");}else{if(res.status===400){dispatch({type:authConstants.REGISTER_OTP_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Something went wrong!\",\"error\");}}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var register=function register(user){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res,_res$data2,token,_user2;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:authConstants.REGISTER_REQUEST});_context3.next=3;return axios.post(\"/register\",user);case 3:res=_context3.sent;if(res.status===201){_res$data2=res.data,token=_res$data2.token,_user2=_res$data2.user;localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(_user2));dispatch({type:authConstants.REGISTER_SUCCESS,payload:{token:token,user:_user2}});Swal.fire(\"Wow.\",\"Register Successful.!\",\"success\");}else{if(res.status===400){dispatch({type:authConstants.REGISTER_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Something went wrong!\",\"error\");}}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var isUserLoggedIn=function isUserLoggedIn(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var token,user;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:token=localStorage.getItem(\"token\");if(token){user=JSON.parse(localStorage.getItem(\"user\"));dispatch({type:authConstants.REGISTER_SUCCESS,payload:{token:token,user:user}});}else{dispatch({type:authConstants.LOGIN_FAILURE,payload:{error:\"Failed to Login\"}});}case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var logout=function logout(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:authConstants.LOGOUT_REQUEST});localStorage.removeItem(\"user\");localStorage.removeItem(\"token\");dispatch({type:authConstants.LOGOUT_SUCCESS});/*#__PURE__*/_jsx(Redirect,{to:\"/\"});Swal.fire(\"Great..\",\"Logout Successful..!\",\"success\");dispatch({type:cartConstants.RESET_CART});// const res = await axios.post(\"/logout\");\n// if (res.status === 200) {\n// \tlocalStorage.clear();\n// \tdispatch({\n// \t\ttype: authConstants.LOGOUT_SUCCESS,\n// \t});\n// } else {\n// \tdispatch({\n// \t\ttype: authConstants.LOGOUT_FAILURE,\n// \t\tpayload: { error: res.data.error },\n// \t});\n// }\ncase 7:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var passUpdateOtp=function passUpdateOtp(phone){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:authConstants.CHANGE_PASSWORD_OTP_REQUEST});_context6.next=3;return axios.post(\"/pass_update_otp\",{phone:phone});case 3:res=_context6.sent;if(res.status===200){dispatch({type:authConstants.CHANGE_PASSWORD_OTP_SUCCESS});Swal.fire(\"Wow.\",\"Otp sent successfully.!\",\"success\");}else{if(res.status===404){dispatch({type:authConstants.CHANGE_PASSWORD_OTP_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"User not found\",\"error\");}if(res.status===400){dispatch({type:authConstants.CHANGE_PASSWORD_OTP_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Something went wrong..\",\"error\");}}case 5:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var updatePassword=function updatePassword(user){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:authConstants.CHANGE_PASSWORD_OTP_REQUEST});_context7.next=3;return axios.post(\"/change_password\",user);case 3:res=_context7.sent;if(res.status===201){dispatch({type:authConstants.CHANGE_PASSWORD_SUCCESS});Swal.fire(\"Wow.\",\"Password changed successfully.!\",\"success\");}else{if(res.status===400){dispatch({type:authConstants.CHANGE_PASSWORD_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Something went wrong..\",\"error\");}if(res.status===401){dispatch({type:authConstants.CHANGE_PASSWORD_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Invalid OTP..\",\"error\");}}case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var googleLogin=function googleLogin(user){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res,_res$data3,token,_user3,_res$data4,_token,_user4;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:dispatch({type:authConstants.REGISTER_REQUEST});_context8.next=3;return axios.post(\"/google_login\",user);case 3:res=_context8.sent;console.log('Google login res',res);if(res.status===201){_res$data3=res.data,token=_res$data3.token,_user3=_res$data3.user;localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(_user3));console.log(\"User token\",{token:token,user:_user3});dispatch({type:authConstants.REGISTER_SUCCESS,payload:{token:token,user:_user3}});Swal.fire(\"Wow.\",\"Register Successful.!\",\"success\");}if(res.status===200){_res$data4=res.data,_token=_res$data4.token,_user4=_res$data4.user;localStorage.setItem(\"token\",_token);localStorage.setItem(\"user\",JSON.stringify(_user4));console.log(\"User token\",{token:_token,user:_user4});dispatch({type:authConstants.LOGIN_SUCCESS,payload:{token:_token,user:_user4}});Swal.fire(\"Wow.\",\"Register Successful.!\",\"success\");}else{if(res.status===400){dispatch({type:authConstants.REGISTER_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Something went wrong!\",\"error\");}}case 7:case\"end\":return _context8.stop();}}},_callee8);}));return function(_x8){return _ref8.apply(this,arguments);};}();};export var facebookLogin=function facebookLogin(user){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var res,_res$data5,token,_user5,_res$data6,_token2,_user6;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:dispatch({type:authConstants.LOGIN_REQUEST});_context9.next=3;return axios.post(\"/facebook_login\",user);case 3:res=_context9.sent;if(res.status===201){_res$data5=res.data,token=_res$data5.token,_user5=_res$data5.user;localStorage.setItem(\"token\",token);localStorage.setItem(\"user\",JSON.stringify(_user5));dispatch({type:authConstants.LOGIN_SUCCESS,payload:{token:token,user:_user5}});Swal.fire(\"Wow.\",\"Register Successful.!\",\"success\");}if(res.status===200){_res$data6=res.data,_token2=_res$data6.token,_user6=_res$data6.user;localStorage.setItem(\"token\",_token2);localStorage.setItem(\"user\",JSON.stringify(_user6));dispatch({type:authConstants.LOGIN_SUCCESS,payload:{token:_token2,user:_user6}});Swal.fire(\"Wow.\",\"Register Successful.!\",\"success\");}else{if(res.status===400){dispatch({type:authConstants.LOGIN_FAILURE,payload:{error:res.data.error}});Swal.fire(\"Oops...\",\"Something went wrong!\",\"error\");}}case 6:case\"end\":return _context9.stop();}}},_callee9);}));return function(_x9){return _ref9.apply(this,arguments);};}();};","map":{"version":3,"sources":["/home/mdalif/Desktop/coding/MERN/mern-frontend/src/actions/auth.action.js"],"names":["Redirect","axios","authConstants","cartConstants","Swal","login","user","dispatch","type","LOGIN_REQUEST","post","res","status","data","token","localStorage","setItem","JSON","stringify","LOGIN_SUCCESS","payload","fire","LOGIN_FAILURE","error","registerOtp","phone","console","log","REGISTER_OTP_FAILURE","REGISTER_OTP_SUCCESS","register","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","isUserLoggedIn","getItem","parse","logout","LOGOUT_REQUEST","removeItem","LOGOUT_SUCCESS","RESET_CART","passUpdateOtp","CHANGE_PASSWORD_OTP_REQUEST","CHANGE_PASSWORD_OTP_SUCCESS","CHANGE_PASSWORD_OTP_FAILURE","updatePassword","CHANGE_PASSWORD_SUCCESS","CHANGE_PASSWORD_FAILURE","googleLogin","facebookLogin"],"mappings":"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","sourcesContent":["import { Redirect } from \"react-router-dom\";\nimport axios from \"../helpers/axios\";\nimport { authConstants, cartConstants } from \"./constants\";\nimport Swal from \"sweetalert2\";\n\n\nexport const login = (user) => {\n\treturn async (dispatch) => {\n\t\tdispatch({ type: authConstants.LOGIN_REQUEST });\n\t\tconst res = await axios.post(\"/login\", {\n\t\t\t...user,\n\t\t});\n\n\t\tif (res.status === 200) {\n\t\t\tconst { token, user } = res.data;\n\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(user));\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.LOGIN_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\ttoken,\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t\tSwal.fire(\"Wow..\", \"Login Successful..!\", \"success\");\n\t\t} else {\n\t\t\tif (res.status === 400) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: authConstants.LOGIN_FAILURE,\n\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t});\n\t\t\t\tSwal.fire(\"Oops...\", \"Something went wrong!\", \"error\");\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport const registerOtp=(phone)=>{\n\n\treturn async (dispatch) => {\n\t\tconsole.log(phone)\n\t\tdispatch({ type: authConstants.REGISTER_OTP_FAILURE });\n\t\tconst res = await axios.post(\"/register_verify\", {phone});\n\n\t\tif (res.status === 200) {\n\t\t\t\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.REGISTER_OTP_SUCCESS,\n\t\t\t\n\t\t\t});\n\t\t\tSwal.fire(\"Wow.\", \"Otp sent successful.!\", \"success\");\n\t\t} else {\n\t\t\tif (res.status === 400) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: authConstants.REGISTER_OTP_FAILURE,\n\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t});\n\t\t\t\tSwal.fire(\"Oops...\", \"Something went wrong!\", \"error\");\n\t\t\t}\n\t\t}\n\t};\n\n\n\n\n\n}\n\nexport const register = (user) => {\n\treturn async (dispatch) => {\n\t\tdispatch({ type: authConstants.REGISTER_REQUEST });\n\t\tconst res = await axios.post(\"/register\", \n\t\t\tuser\n\t\t);\n\n\t\tif (res.status === 201) {\n\t\t\tconst { token, user } = res.data;\n\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(user));\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.REGISTER_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\ttoken,\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t\tSwal.fire(\"Wow.\", \"Register Successful.!\", \"success\");\n\t\t} else {\n\t\t\tif (res.status === 400) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: authConstants.REGISTER_FAILURE,\n\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t});\n\t\t\t\tSwal.fire(\"Oops...\", \"Something went wrong!\", \"error\");\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport const isUserLoggedIn = () => {\n\treturn async (dispatch) => {\n\t\tconst token = localStorage.getItem(\"token\");\n\t\tif (token) {\n\t\t\tconst user = JSON.parse(localStorage.getItem(\"user\"));\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.REGISTER_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\ttoken,\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.LOGIN_FAILURE,\n\t\t\t\tpayload: { error: \"Failed to Login\" },\n\t\t\t});\n\t\t}\n\t};\n};\n\nexport const logout = () => {\n\treturn async (dispatch) => {\n\t\tdispatch({\n\t\t\ttype: authConstants.LOGOUT_REQUEST,\n\t\t});\n\t\tlocalStorage.removeItem(\"user\");\n\t\tlocalStorage.removeItem(\"token\");\n\t\tdispatch({\n\t\t\ttype: authConstants.LOGOUT_SUCCESS,\n\t\t});\n\n\t\t<Redirect to='/' />;\n\t\tSwal.fire(\"Great..\", \"Logout Successful..!\", \"success\");\n\t\tdispatch({\n\t\t\ttype: cartConstants.RESET_CART,\n\t\t});\n\n\t\t// const res = await axios.post(\"/logout\");\n\t\t// if (res.status === 200) {\n\t\t// \tlocalStorage.clear();\n\t\t// \tdispatch({\n\t\t// \t\ttype: authConstants.LOGOUT_SUCCESS,\n\t\t// \t});\n\t\t// } else {\n\t\t// \tdispatch({\n\t\t// \t\ttype: authConstants.LOGOUT_FAILURE,\n\t\t// \t\tpayload: { error: res.data.error },\n\t\t// \t});\n\t\t// }\n\t};\n};\n\n\n\nexport const passUpdateOtp=(phone)=>{\n\n\n\treturn async (dispatch) => {\n\t\tdispatch({ type: authConstants.CHANGE_PASSWORD_OTP_REQUEST });\n\t\tconst res = await axios.post(\"/pass_update_otp\", {phone});\n\n\t\tif (res.status === 200) {\n\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.CHANGE_PASSWORD_OTP_SUCCESS,\n\t\t\t\n\t\t\t});\n\t\t\tSwal.fire(\"Wow.\", \"Otp sent successfully.!\", \"success\");\n\t\t} else {\n\t\t\tif (res.status === 404) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: authConstants.CHANGE_PASSWORD_OTP_FAILURE,\n\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t});\n\t\t\t\tSwal.fire(\"Oops...\", \"User not found\", \"error\");\n\t\t\t}\n\n\n\n\t\t\t\tif (res.status === 400) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: authConstants.CHANGE_PASSWORD_OTP_FAILURE,\n\t\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t\t});\n\t\t\t\t\tSwal.fire(\"Oops...\", \"Something went wrong..\", \"error\");\n\t\t\t\t}\n\t\t}\n\t};\n\n\n\n\n}\n\nexport const updatePassword=(user)=>{\n\treturn async (dispatch) => {\n\t\tdispatch({ type: authConstants.CHANGE_PASSWORD_OTP_REQUEST });\n\t\tconst res = await axios.post(\"/change_password\",  user );\n\n\t\tif (res.status === 201) {\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.CHANGE_PASSWORD_SUCCESS,\n\t\t\t});\n\t\t\tSwal.fire(\"Wow.\", \"Password changed successfully.!\", \"success\");\n\t\t} else {\n\t\t\t\t\n\t\t\tif (res.status === 400) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: authConstants.CHANGE_PASSWORD_FAILURE,\n\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t});\n\t\t\t\tSwal.fire(\"Oops...\", \"Something went wrong..\", \"error\");\n\t\t\t}\n\n\t\t\t\tif (res.status === 401) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: authConstants.CHANGE_PASSWORD_FAILURE,\n\t\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t\t});\n\t\t\t\t\tSwal.fire(\"Oops...\", \"Invalid OTP..\", \"error\");\n\t\t\t\t}\n\t\t}\n\t};\n\n}\n\n\nexport const googleLogin = (user) => {\n\treturn async (dispatch) => {\n\t\tdispatch({ type: authConstants.REGISTER_REQUEST });\n\t\tconst res = await axios.post(\"/google_login\", user);\n\n\t\tconsole.log('Google login res',res)\n\n\t\tif (res.status === 201) {\n\t\t\tconst { token, user } = res.data;\n\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(user));\n\n\t\t\tconsole.log(\"User token\", { token, user });\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.REGISTER_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\ttoken,\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t\tSwal.fire(\"Wow.\", \"Register Successful.!\", \"success\");\n\t\t}\n\t\t\tif (res.status === 200) {\n\t\t\t\tconst { token, user } = res.data;\n\t\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(user));\n\t\t\t\tconsole.log(\"User token\", { token, user });\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: authConstants.LOGIN_SUCCESS,\n\t\t\t\t\tpayload: {\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\tuser,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tSwal.fire(\"Wow.\", \"Register Successful.!\", \"success\");\n\t\t\t} else {\n\t\t\t\tif (res.status === 400) {\n\t\t\t\t\tdispatch({\n\t\t\t\t\t\ttype: authConstants.REGISTER_FAILURE,\n\t\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t\t});\n\t\t\t\t\tSwal.fire(\"Oops...\", \"Something went wrong!\", \"error\");\n\t\t\t\t}\n\t\t\t}\n\t};\n};\n\n\n\n\n\n\n\nexport const facebookLogin = (user) => {\n\treturn async (dispatch) => {\n\t\tdispatch({ type: authConstants.LOGIN_REQUEST });\n\t\tconst res = await axios.post(\"/facebook_login\", user);\n\n\t\tif (res.status === 201) {\n\t\t\tconst { token, user } = res.data;\n\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(user));\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.LOGIN_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\ttoken,\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t\tSwal.fire(\"Wow.\", \"Register Successful.!\", \"success\");\n\t\t}\n\t\tif (res.status === 200) {\n\t\t\tconst { token, user } = res.data;\n\t\t\tlocalStorage.setItem(\"token\", token);\n\t\t\tlocalStorage.setItem(\"user\", JSON.stringify(user));\n\t\t\tdispatch({\n\t\t\t\ttype: authConstants.LOGIN_SUCCESS,\n\t\t\t\tpayload: {\n\t\t\t\t\ttoken,\n\t\t\t\t\tuser,\n\t\t\t\t},\n\t\t\t});\n\t\t\tSwal.fire(\"Wow.\", \"Register Successful.!\", \"success\");\n\t\t} else {\n\t\t\tif (res.status === 400) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: authConstants.LOGIN_FAILURE,\n\t\t\t\t\tpayload: { error: res.data.error },\n\t\t\t\t});\n\t\t\t\tSwal.fire(\"Oops...\", \"Something went wrong!\", \"error\");\n\t\t\t}\n\t\t}\n\t};\n};\n\n\n\n"]},"metadata":{},"sourceType":"module"}